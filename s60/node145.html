<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="s60.css" type='text/css' />
<link rel="SHORTCUT ICON" href="../icons/pyfav.png" type="image/png" />
<link rel='start' href='../index.html' title='Python documentation Index' />
<link rel="first" href="s60.html" title='S60 module Reference' />
<link rel='contents' href='contents.html' title="Contents" />
<link rel='index' href='genindex.html' title='Index' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="next" href="node146.html" />
<link rel="prev" href="node144.html" />
<link rel="parent" href="node144.html" />
<link rel="next" href="node146.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>6.6.1 GetList</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6.6 Location"
  href="node144.html"><img src='../icons/previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="6.6 Location"
  href="node144.html"><img src='../icons/up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="6.6.2 Trace"
  href="node146.html"><img src='../icons/next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">S60 Module Reference</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='../icons/contents.png'
  border='0' height='32'  alt='Contents' width='32' /></a></td>
<td class='online-navigation'><a href="modindex.html" title="Module Index"><img src='../icons/modules.png'
  border='0' height='32'  alt='Module Index' width='32' /></a></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='../icons/index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node144.html">6.6 Location</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node144.html">6.6 Location</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node146.html">6.6.2 Trace</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h2><a name="SECTION008610000000000000000"></a>
<a name="subsec:localget"></a>
<br>
6.6.1 GetList
</h2>

<p>
<code>GetList</code> is used to retrieve the current location of the device.

<p>
The following are the examples for using <code>GetList</code>:

<p>
<b>Synchronous</b> <br>

<p>
<div class="verbatim"><pre>
GetList_Output = location_handle.call('GetList', {'LocationInformationClass': u'BasicLocationInformation', 'Updateoptions': {'UpdateInterval':u'1', 'UpdateTimeOut': u'15', 'UpdateMaxAge' :u'0', 'PartialUpdates': u'False'}})
</pre></div>

<p>
<b>Asynchronous</b> <br>

<p>
<div class="verbatim"><pre>
event_id = location_handle.call('GetList', {'LocationInformationClass':  u'BasicLocationInformation', 'Updateoptions': {'UpdateInterval': u'1', 'UpdateTimeOut': u'15', 'UpdateMaxAge': u'0', 'PartialUpdates': u'False'}}, callback=get_list)
</pre></div>

<p>
where, <code>get_list</code> is a user defined function.

<p>
The following table summarizes the specification of <code>GetList</code>:
<br>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT" valign="TOP" width=85><b>Interface</b></td>
<td align="LEFT" valign="TOP" width=283><code>ILocation</code></td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Description</b></td>
<td align="LEFT" valign="TOP" width=283>Retrieves the current location of the device.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Response Model</b></td>
<td align="LEFT" valign="TOP" width=283>Synchronous and asynchronous</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Pre-condition</b></td>
<td align="LEFT" valign="TOP" width=283>Device must be Location aware (that is, it must have some location information provider in form of GPS, AGPS, or Bluetooth). <br>
ILocation interface loaded.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Post-condition</b></td>
<td align="LEFT" valign="TOP" width=283>Nil</td>
</tr>
</table>
</div>
<br>

<p>
<b>Input Parameters</b> <br>

<p>
Input parameter specifies the category of location information and the update option used for retrieving location information.
<br><p></p>
<div align="CENTER"><a name="15171"></a>
<table>
<caption><strong>Table 6.122:</strong>
Input parameters for GetList</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT" valign="TOP" width=85><b>Name</b></td>
<td align="LEFT" valign="TOP" width=85><b>Type</b></td>
<td align="LEFT" valign="TOP" width=57><b>Range</b></td>
<td align="LEFT" valign="TOP" width=170><b>Description</b></td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><code>[Location Information Class]</code></td>
<td align="LEFT" valign="TOP" width=85>unicode string</td>
<td align="LEFT" valign="TOP" width=57><code>Basic Location Information</code> <br>
<code>Generic Location Info</code></td>
<td align="LEFT" valign="TOP" width=170>This specifies category of location information. You will receive   detailed location estimations on specifying <code>Generic Location Info</code>. <br>

<p>
Default value for this argument is <code>BasicLocationInformation</code>. <br>

<p>
Refer to <code>Updateoptions</code> description to know more about what are the output that are guaranteed to be in the location estimates for each of the <code>LocationInformationClass</code> provided.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><code>[Updateoptions]</code></td>
<td align="LEFT" valign="TOP" width=85>map <br>
<b>Name</b>: <b>Type</b> <br>
[UpdateInterval] (Microseconds): int32 <br>
[UpdateTimeOut] (Microseconds): int32 <br>
[UpdateMaxAge] (Microseconds): int32 <br>
[PartialUpdates] (Microseconds): bool</td>
<td align="LEFT" valign="TOP" width=57>NA</td>
<td align="LEFT" valign="TOP" width=170>This specifies update option used while retrieving location estimation. <br>

<p>
Default values are used if no argument is specified as part of input argument list. <br>

<p>
<code>UpdateInterval</code> specifies the time interval between two consecutive location estimates. <br>

<p>
If location server is not able to give location estimates within specified <code>UpdateTimedOut</code>, you will receive <code>SErrTimedOut</code> error. <br>

<p>
<code>UpdateMaxAge</code> specifies the expiry time for the position information cache. It means that when a position request is made the position information can be returned from the cache, (Managed by location server) as long as the cache is not older that the specified maximum age. <br>
The default value is zero that is, the position information will never be returned from cache. <br>

<p>
Setting <code>PartialUpdates</code> to <b>FALSE</b> ensures that you will get at least <code>BasicLocationInformation</code> (Longitude, Latitude, and Altitude.) <br>

<p>
By default, following values (in seconds) are used for these input parameters.
<code>UpdateInterval</code> = 1 <br>
<code>UpdateTimeOut</code> = 15 <br>
<code>UpdateMaxAge</code> = 0 <br>
<code>PartialUpdates</code> = FALSE <br>

<p>
<b>note:</b> <br>

<p>
In case the following order is not maintained when you supply value for <code>updateoption</code>, it returns the error <code>SErrArgument</code>. <br>
UpdateTimeOut&gt;UpdateInterval&gt;MaxAge</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Output Parameters</b> <br>

<p>
Output parameters contain the requested information. They also contain <code>ErrorCode</code>, and <code>ErrorMessage</code> if the operation fails.
<br><p></p>
<div align="CENTER"><a name="15197"></a>
<table>
<caption><strong>Table 6.123:</strong>
Output parameters for GetList</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT"><b>Name</b></td>
<td align="LEFT" valign="TOP" width=113><b>Type</b></td>
<td align="LEFT" valign="TOP" width=57><b>Range (Type: string)</b></td>
<td align="LEFT" valign="TOP" width=170><b>Description</b></td>
</tr>
<tr><td align="LEFT"><code>ErrorCode</code></td>
<td align="LEFT" valign="TOP" width=113>int</td>
<td align="LEFT" valign="TOP" width=57>NA</td>
<td align="LEFT" valign="TOP" width=170>Service specific error code on failure of the operation.</td>
</tr>
<tr><td align="LEFT"><code>ErrorMessage</code></td>
<td align="LEFT" valign="TOP" width=113>string</td>
<td align="LEFT" valign="TOP" width=57>NA</td>
<td align="LEFT" valign="TOP" width=170>Error description in Engineering English.</td>
</tr>
<tr><td align="LEFT"><code>ReturnValue</code></td>
<td align="LEFT" valign="TOP" width=113>For more information, refer table map: GetList <a href="#tab:mapget">6.124</a></td>
<td align="LEFT" valign="TOP" width=57>NA</td>
<td align="LEFT" valign="TOP" width=170>It contains location estimations. In case you specify <code>BasicLocationInformation</code> in the input list only longitude, latitude and altitude will return. <br>

<p>
<b>note:</b> <br>
If <code>PartialUpdates</code> is set to <b>FALSE</b> you must get longitude, altitude and latitude. <br>
The WGS-84 datum is used to refer co-ordinates. Also representation is in decimal degree. <br>

<p>
In case generic information is requested, there is no guarantee that all information mentioned here will be obtained as it depends on the underlying GPS technology and other factor like number of satellites, which are available when location fix is obtained. <br>

<p>
<b>note:</b> <br>
Not all GPS technology are capable of retrieving all information listed here. For example, if you select network based positioning technology it does not have capability to retrieve satellites information.

<p>
In situation where a particular field can not be retrieved from the underlying GPS technology, it will not be present in the output list mentioned here.</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<br><p></p>
<div align="CENTER"><a name="15224"></a>
<table>
<caption><strong>Table 6.124:</strong>
map: GetList</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT"><b>Data</b></td>
<td align="LEFT"><b>Type</b></td>
<td align="LEFT"><b>Description</b></td>
</tr>
<tr><td align="LEFT"><code>Longitude</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">This is the longitudinal data. Degree value is in the range [+180, -180].</td>
</tr>
<tr><td align="LEFT"><code>Latitude</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">This is the latitudinal data. Degree value is in the range [+90, -90].</td>
</tr>
<tr><td align="LEFT"><code>Altitude</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">Altitude data, height in meters.</td>
</tr>
<tr><td align="LEFT"><code>SatelliteNumView</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">Number of field satellite currently in view.</td>
</tr>
<tr><td align="LEFT"><code>SatelliteNumViewUsed</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">Number of satellites used.</td>
</tr>
<tr><td align="LEFT"><code>HorizontalSpeed</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">Horizontal speed, value in meters per second.</td>
</tr>
<tr><td align="LEFT"><code>HorizontalSpeedError</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">Horizontal speed error, value in meters per second.</td>
</tr>
<tr><td align="LEFT"><code>TrueCourse</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">This is the information about the current direction in degrees to true north.</td>
</tr>
<tr><td align="LEFT"><code>TrueCourseError</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">This is the true course error in degrees.</td>
</tr>
<tr><td align="LEFT"><code>MagneticHeading</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">This is the current direction in degrees to magnetic north.</td>
</tr>
<tr><td align="LEFT"><code>MagneticHeadingError</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">True magnetic course error in Degrees.</td>
</tr>
<tr><td align="LEFT"><code>Heading</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">This is the current instantaneous direction of travel in degrees to the true north.</td>
</tr>
<tr><td align="LEFT"><code>HeadingError</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">Heading error, value in degrees.</td>
</tr>
<tr><td align="LEFT"><code>MagneticCourse</code></td>
<td align="LEFT">Double</td>
<td align="LEFT">This is the information about the current direction in degrees to magnetic north.</td>
</tr>
<tr><td align="LEFT"><code>MagneticCourseError</code></td>
<td align="LEFT">Double</td>
<td align="LEFT"><code>Magneticcourser</code> error.</td>
</tr>
</table>

<a name="tab:mapget"></a>
</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Errors</b> <br>

<p>
The following table lists the error codes and their values:
<br><p></p>
<div align="CENTER"><a name="15242"></a>
<table>
<caption><strong>Table 6.125:</strong>
Error codes</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT"><b>Error code value</b></td>
<td align="LEFT"><b>Description</b></td>
</tr>
<tr><td align="LEFT"><code>-302</code></td>
<td align="LEFT">No Interface</td>
</tr>
<tr><td align="LEFT"><code>0</code></td>
<td align="LEFT">Success</td>
</tr>
<tr><td align="LEFT"><code>1007</code></td>
<td align="LEFT">No memory</td>
</tr>
<tr><td align="LEFT"><code>1009</code></td>
<td align="LEFT">Server busy</td>
</tr>
<tr><td align="LEFT"><code>1011</code></td>
<td align="LEFT">Access denied</td>
</tr>
<tr><td align="LEFT"><code>1016</code></td>
<td align="LEFT">Service timed-out</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Error Messages</b> <br>

<p>
The following table lists the error messages and their description: 

<p>
<br><p></p>
<div align="CENTER"><a name="15260"></a>
<table>
<caption><strong>Table 6.126:</strong>
Error messages</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT" valign="TOP" width=198><b>Error messages</b></td>
<td align="LEFT" valign="TOP" width=198><b>Description</b></td>
</tr>
<tr><td align="LEFT" valign="TOP" width=198><code>Location:GetList:Wrong category info should be BasicLocationInformation/ GenericLocationInfo</code></td>
<td align="LEFT" valign="TOP" width=198>Indicates argument supplied for category information is wrong.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=198><code>Location:GetList:BadArgument - Updateoptions</code></td>
<td align="LEFT" valign="TOP" width=198>Indicates argument supplied for <code>Updateoptions</code> is wrong.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=198><code>Location:GetList:Negative Time Interval</code></td>
<td align="LEFT" valign="TOP" width=198>Indicates time interval supplied is negative.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=198><code>Location:GetList:Updateoptions Type Mismatch</code></td>
<td align="LEFT" valign="TOP" width=198>Indicates a wrongly supplied type for <code>Updateoptions</code>.</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Example</b> <br>

<p>
The following sample code illustrates how to retrieve a list with location information, in asynchronous mode:

<p>
<div class="verbatim"><pre>
import scriptext
import e32

# Using e32.Ao_lock() to make main function wait till callback is hit
lock = e32.Ao_lock()

# Callback function will be called when the requested service is complete
def get_list(trans_id, event_id, input_params):
    if event_id != scriptext.EventCompleted:   
# Check the event status
        print "Error in retrieving required info"
        print "Error code is: " + str(input_params["ReturnValue"]["ErrorCode"])
        if "ErrorMessage" in input_params["ReturnValue"]:
            print "Error message:" + input_params["ReturnValue"]["ErrorMessage"]
    else:
        print "The landmarks are"
        for i in input_params["ReturnValue"]:
            print "Longitude"
            print i["Longitude"]
            print "Latitude"
            print i['Latitude']
            print "Altitude"
            print i['Altitude']
            print "SatelliteNumView"
            print i['SatelliteNumView']
            print "SatelliteNumViewUsed"
            print i['SatelliteNumViewUsed']
            print "HorizontalSpeed"
            print i['HorizontalSpeed']

    lock.signal()

# Async Query a location with search criteria
location_handle = scriptext.load('Service.Location', 'ILocation')
event_id = location_handle.call('GetList', {'LocationInformationClass': u'BasicLocationInformation', 'Updateoptions': {'UpdateInterval': u'1', 'UpdateTimeOut': u'15', 'UpdateMaxAge': u'0', 'PartialUpdates': u'False'}}, callback=get_list)

print "Waiting for the request to be processed!"
lock.wait()
print "Request complete!"
</pre></div>

<p>

<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6.6 Location"
  href="node144.html"><img src='../icons/previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="6.6 Location"
  href="node144.html"><img src='../icons/up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="6.6.2 Trace"
  href="node146.html"><img src='../icons/next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">S60 Module Reference</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='../icons/contents.png'
  border='0' height='32'  alt='Contents' width='32' /></a></td>
<td class='online-navigation'><a href="modindex.html" title="Module Index"><img src='../icons/modules.png'
  border='0' height='32'  alt='Module Index' width='32' /></a></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='../icons/index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node144.html">6.6 Location</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node144.html">6.6 Location</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node146.html">6.6.2 Trace</a>
</div>
</div>
<hr />
<span class="release-info">Release 2.0.0 final  , documentation updated on 10 Feb 2010.</span>
</div>
<!--End of Navigation Panel-->
<address>
See <i><a href="about.html">About this document...</a></i> for information on suggesting changes.
</address>
</body>
</html>
