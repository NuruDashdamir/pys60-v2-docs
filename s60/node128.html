<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="s60.css" type='text/css' />
<link rel="SHORTCUT ICON" href="../icons/pyfav.png" type="image/png" />
<link rel='start' href='../index.html' title='Python documentation Index' />
<link rel="first" href="s60.html" title='S60 module Reference' />
<link rel='contents' href='contents.html' title="Contents" />
<link rel='index' href='genindex.html' title='Index' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="next" href="node129.html" />
<link rel="prev" href="node127.html" />
<link rel="parent" href="node127.html" />
<link rel="next" href="node129.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>6.4.1 GetList</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6.4 Contacts"
  href="node127.html"><img src='../icons/previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="6.4 Contacts"
  href="node127.html"><img src='../icons/up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="6.4.2 Add"
  href="node129.html"><img src='../icons/next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">S60 Module Reference</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='../icons/contents.png'
  border='0' height='32'  alt='Contents' width='32' /></a></td>
<td class='online-navigation'><a href="modindex.html" title="Module Index"><img src='../icons/modules.png'
  border='0' height='32'  alt='Module Index' width='32' /></a></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='../icons/index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node127.html">6.4 Contacts</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node127.html">6.4 Contacts</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node129.html">6.4.2 Add</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h2><a name="SECTION008410000000000000000"></a>
<a name="subsec:contactgetlist"></a>
<br>
6.4.1 GetList
</h2>

<p>
<code>GetList</code> retrieves a list of contacts, contact groups, or contacts databases. Contacts and contact groups are retrieved from the specified contacts database. If no database is specified, from the default one.
This method can be called both in synchronous and asynchronous mode.

<p>
<div class="note"><b class="label">Note:</b>

Calls that retrieve a list of databases must be synchronous.
</div>

<p>
The following are the examples for using <code>GetList</code>:

<p>
<b>Synchronous</b> <br>

<p>
<div class="verbatim"><pre>
list_contacts = contacts_handle.call('GetList', {'Type': u'Contact', 'Filter': {'SearchVal': u'Daniel'}})
</pre></div>

<p>
<b>Asynchronous</b> <br>

<p>
<div class="verbatim"><pre>
event_id = contacts_handle.call('GetList', {'Type': u'Contact', 'Filter':{'SearchVal': u'Craig'}}, callback=get_list)
</pre></div>

<p>
where, <code>get_list</code> is a user defined function. 

<p>
The following table summarizes the specification of <code>GetList</code>:
<br>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT" valign="TOP" width=85><b>Interface</b></td>
<td align="LEFT" valign="TOP" width=283><code>IDataSource</code></td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Description</b></td>
<td align="LEFT" valign="TOP" width=283>Retrieves a list of contacts or groups in the default or specified database, also used to get the list of existing databases.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Response Model</b></td>
<td align="LEFT" valign="TOP" width=283>Synchronous and asynchronous in case of Third Edition FP2 and Fifth Edition devices, except for <code>GetList</code> with Type as <b>Database</b>, which will always be synchronous. <br>

<p>
In case of Third Edition and Third Edition FP1 devices: <br>
Synchronous for Get Single Contact and Group. <br>
Asynchronous and synchronous for the rest of the functionality.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Pre-condition</b></td>
<td align="LEFT" valign="TOP" width=283><code>IDataSource</code> interface is loaded.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=85><b>Post-condition</b></td>
<td align="LEFT" valign="TOP" width=283>Nil</td>
</tr>
</table>
</div>
<br>

<p>
<b>Input Parameters</b> <br>

<p>
<code>GetList</code> retrieves a list of contacts objects and metadata from the S60 messaging center based on Search or Sort inputs. This is an object that specifies what contact information is returned and how the returned information is sorted.
<br><p></p>
<div align="CENTER"><a name="11381"></a>
<table>
<caption><strong>Table 6.59:</strong>
Input parameters Getlist</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT" valign="TOP" width=28><b>Name</b></td>
<td align="LEFT" valign="TOP" width=85><b>Type</b></td>
<td align="LEFT" valign="TOP" width=113><b>Range</b></td>
<td align="LEFT" valign="TOP" width=170><b>Description</b></td>
</tr>
<tr><td align="LEFT" valign="TOP" width=28>Type</td>
<td align="LEFT" valign="TOP" width=85>unicode string</td>
<td align="LEFT" valign="TOP" width=113><code>Contact</code> <br>
<code>Group</code> <br>
<code>Database</code></td>
<td align="LEFT" valign="TOP" width=170>Operation is performed on the specified type.</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=28>[Filter]</td>
<td align="LEFT" valign="TOP" width=85><b>Contact</b> (map) <br>
<code>[DBUri]</code>: unicode string <br>
<code>[id]</code>: unicode string <br>
<code>[SearchVal]</code>: unicode string <br>
<b>Group</b> (map) <br>
[DBUri]: unicode string <br>
[Id]: unicode string <br>
<b>Database</b> <br>
No map required.</td>
<td align="LEFT" valign="TOP" width=113><code>DBUri</code>: Database on which search must be performed. <br>
<code>Id</code>: Id is the unique identifier of the contact item or group to be retrieved. If <code>Id</code> is specified, <code>SearchVal</code> and <code>DBUri</code> are not required, and they will be ignored. <br>

<p>
<code>SearchVal</code>: Value searched for in the given <code>DBUri</code>. It cannot exceed 255 characters. <br>
If Filter is not supplied and Type is <b>Contact</b>, then it gets all the contacts of the default database. <br>

<p>
If Filter is not supplied and Type is <b>Group</b>, then it gets all the groups of the default database.</td>
<td align="LEFT" valign="TOP" width=170><code>SearchVal</code>: Value searched for in the given <code>DBUri</code> (If default database is not specified). If <code>SearchVal</code> is not specified then, it loads all the contacts in the database. <br>

<p>
<code>SearchVal</code> is looked for in first name and last name fields in case of Third Edition FP2 and Fifth Edition devices and it looks in all fields in case of Third Edition and Third Edition FP1 devices. <br>

<p>
With Type as <b>Contact</b>, it retrieves the list of contacts based on the Filter map input (if provided). <br>

<p>
With Type as <b>Group</b>, it gets a list of all the groups in the default database, if Filter is not specified. If Filter is specified, and <code>Id</code> is given, it fetches the group that the <code>Id</code> represents (DBUri is ignored in this case). Searching for a group by its name is not supported. <br>

<p>
With Type as <b>Database</b>, it gets the list of all the open databases.</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Output Parameters</b> <br>

<p>
Output parameter contains <code>ReturnValue</code>. It also contains <code>ErrorCode</code> and an <code>ErrorMessage</code> if the operation fails. <code>ReturnValue</code> contains complete contact item, group, or database information requested by <code>GetList</code>.
<br><p></p>
<div align="CENTER"><a name="11424"></a>
<table>
<caption><strong>Table 6.60:</strong>
Output parameters for GetList</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT"><b>Name</b></td>
<td align="LEFT" valign="TOP" width=57><b>Type</b></td>
<td align="LEFT" valign="TOP" width=85><b>Range</b></td>
<td align="LEFT" valign="TOP" width=198><b>Description</b></td>
</tr>
<tr><td align="LEFT"><code>ErrorCode</code></td>
<td align="LEFT" valign="TOP" width=57>int</td>
<td align="LEFT" valign="TOP" width=85>NA</td>
<td align="LEFT" valign="TOP" width=198>Contains the SAPI specific error code when the operation fails.</td>
</tr>
<tr><td align="LEFT"><code>ErrorMessage</code></td>
<td align="LEFT" valign="TOP" width=57>string</td>
<td align="LEFT" valign="TOP" width=85>NA</td>
<td align="LEFT" valign="TOP" width=198>Error Description in Engineering English.</td>
</tr>
<tr><td align="LEFT"><code>ReturnValue</code></td>
<td align="LEFT" valign="TOP" width=57>iterable list of maps</td>
<td align="LEFT" valign="TOP" width=85><b>Contact</b> (map) <a href="#tab:contactmap">6.61</a> <br>
<b>Group</b> (map) <a href="#tab:groupmap">6.62</a> <br>
<b>Database</b> (map) <br>
<code>DBUri</code>: string</td>
<td align="LEFT" valign="TOP" width=198>Every <b>Next</b> operation on the iterator returns a map. <br>
Each map contains complete contact item/group/database information. <br>

<p>
Every <b>Next</b> operation on a contact gives a map with: <br>

<p>
<code>id</code>: It is a unique identifier for the contact that the map represents. <br>
<em>Key1, Key2..</em>: Gets as many keys available for a particular contact. For more information on keys, refer the section Key Values <a href="node134.html#subsec:contactkeyval">6.4.7</a>. <br>
Label and value give the information for the key. <br>
<b>Next</b>: In case, the key has multiple values, then it is added as another map. <br>

<p>
Every <b>Next</b> operation on group gives a map with: <br>

<p>
<code>id</code>: It is a unique identifier for the group that the map represents. <br>
<code>GroupLabel</code>: Label to the group. <br>
Contents: List of <code>ids</code> of the contacts that belong to the particular group. For example, <em>Contact Id1</em>, <em>Contact Id2</em>.

<p>
Every <b>Next</b> operation on database gives a map with: <br>
<code>DBUri</code>: Uri of the database that is represented by the particular map.</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<br><p></p>
<div align="CENTER"><a name="11437"></a>
<table>
<caption><strong>Table 6.61:</strong>
Contact(map)</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT"><b>Key</b></td>
<td align="LEFT"><b>Value</b></td>
<td align="LEFT">NA</td>
<td align="LEFT">NA</td>
</tr>
<tr><td align="LEFT"><code>id</code></td>
<td align="LEFT">string</td>
<td align="LEFT">NA</td>
<td align="LEFT">NA</td>
</tr>
<tr><td align="LEFT"><em>Key1</em></td>
<td align="LEFT">map</td>
<td align="LEFT">NA</td>
<td align="LEFT">NA</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">Label</td>
<td align="LEFT">NA</td>
<td align="LEFT">string</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">Value</td>
<td align="LEFT">NA</td>
<td align="LEFT">string</td>
</tr>
<tr><td align="LEFT"><em>Key2</em></td>
<td align="LEFT">map</td>
<td align="LEFT">NA</td>
<td align="LEFT">NA</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">Label</td>
<td align="LEFT">string</td>
<td align="LEFT">NA</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">Value</td>
<td align="LEFT">string</td>
<td align="LEFT">NA</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">Next</td>
<td align="LEFT">map</td>
<td align="LEFT">NA</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">NA</td>
<td align="LEFT">Label</td>
<td align="LEFT">string</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">NA</td>
<td align="LEFT">Value</td>
<td align="LEFT">string</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">NA</td>
<td align="LEFT">Next</td>
<td align="LEFT">map</td>
</tr>
</table>

<a name="tab:contactmap"></a>
</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<br><p></p>
<div align="CENTER"><a name="11452"></a>
<table>
<caption><strong>Table 6.62:</strong>
Group(map)</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT"><b>Key</b></td>
<td align="LEFT"><b>Value</b></td>
</tr>
<tr><td align="LEFT"><code>id</code></td>
<td align="LEFT">string</td>
</tr>
<tr><td align="LEFT"><code>GroupLabel</code></td>
<td align="LEFT">string</td>
</tr>
<tr><td align="LEFT">Contents</td>
<td align="LEFT">List</td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT"><em>Contact id1</em></td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT"><em>Contact id2</em></td>
</tr>
<tr><td align="LEFT">NA</td>
<td align="LEFT">....</td>
</tr>
</table>

<a name="tab:groupmap"></a>
</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Errors</b> <br>

<p>
The following table lists the errors and their values:
<br><p></p>
<div align="CENTER"><a name="11466"></a>
<table>
<caption><strong>Table 6.63:</strong>
Error codes</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT"><b>Error code value</b></td>
<td align="LEFT"><b>Description</b></td>
</tr>
<tr><td align="LEFT"><code>0</code></td>
<td align="LEFT">Success</td>
</tr>
<tr><td align="LEFT"><code>1002</code></td>
<td align="LEFT">Bad argument type</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Error Messages</b> <br>

<p>
The following table lists the error messages and their description:
<br><p></p>
<div align="CENTER"><a name="11486"></a>
<table>
<caption><strong>Table 6.64:</strong>
Error messages</caption>
<tr><td>
<div align="CENTER">
<table cellpadding=3 border="1" align="CENTER">
<tr><td align="LEFT" valign="TOP" width=170><b>Error messages</b></td>
<td align="LEFT" valign="TOP" width=227><b>Description</b></td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList:Type is missing</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates Type is missing</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList: Invalid value for Type, Must be Contact/Group/Database</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates invalid value for Type</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList:Invalid Sort Type, Map is required</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates that the sort order type passed is invalid, map is expected</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList:Sort Order Value is not a String</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates that the value for order must be a string</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList:Invalid Type of Filter, Map is required</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates that the value for Filter must be a map</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList:Wrong Type of Sort Order value</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates that sort order value is not ascending or descending</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList:Wrong Type of Search value</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates that search value is not a string</td>
</tr>
<tr><td align="LEFT" valign="TOP" width=170><code>Contacts:GetList:Wrong Type of ContentType</code></td>
<td align="LEFT" valign="TOP" width=227>Indicates that the Type is not a string.</td>
</tr>
</table>

</div></td></tr>
</table>
</div><p></p>
<br>

<p>
<b>Example</b> <br>

<p>
The following sample code illustrates how to list full name of contact matched by last name in asynchronous mode:

<p>
<div class="verbatim"><pre>
import scriptext
import e32

# Using e32.Ao_lock() to make main function wait till callback is hit
lock = e32.Ao_lock()

# Callback function will be called when the requested service is complete
def get_list(trans_id, event_id, input_params):
    if event_id != scriptext.EventCompleted:   
# Check the event status
        print "Error in retrieving required info"
        print "Error code is: " + str(input_params["ReturnValue"]["ErrorCode"])
        if "ErrorMessage" in input_params["ReturnValue"]:
        print "Error message:" + input_params["ReturnValue"]["ErrorMessage"]
    else:
        print "The contacts matching are"
        for i in input_params["ReturnValue"]:
            print i["FirstName"]["Value"] + i["LastName"]["Value"]
    lock.signal()

# Load contacts module
contacts_handle = scriptext.load("Service.Contact", "IDataSource")

event_id = contacts_handle.call('GetList', {'Type': u'Contact', 'Filter':{'SearchVal': u'Craig'}}, callback=get_list)

print "Waiting for the request to be processed!"
lock.wait()
print "Request complete!"
</pre></div>

<p>

<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6.4 Contacts"
  href="node127.html"><img src='../icons/previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="6.4 Contacts"
  href="node127.html"><img src='../icons/up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="6.4.2 Add"
  href="node129.html"><img src='../icons/next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">S60 Module Reference</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='../icons/contents.png'
  border='0' height='32'  alt='Contents' width='32' /></a></td>
<td class='online-navigation'><a href="modindex.html" title="Module Index"><img src='../icons/modules.png'
  border='0' height='32'  alt='Module Index' width='32' /></a></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='../icons/index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node127.html">6.4 Contacts</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node127.html">6.4 Contacts</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node129.html">6.4.2 Add</a>
</div>
</div>
<hr />
<span class="release-info">Release 2.0.0 final  , documentation updated on 10 Feb 2010.</span>
</div>
<!--End of Navigation Panel-->
<address>
See <i><a href="about.html">About this document...</a></i> for information on suggesting changes.
</address>
</body>
</html>
